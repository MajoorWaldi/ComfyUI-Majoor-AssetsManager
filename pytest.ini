[pytest]
# Collect only this repository's tests.
testpaths = tests

# Strict minimal suite: only critical smoke/regression tests.
python_files =
    test_import_smoke.py
    test_routes.py
    test_schema_heal.py
    test_write_access_guard.py
    test_browser_service.py
    test_health_service.py
    test_collections_service.py
    test_duplicates_service.py
    test_search_filters.py
    test_search_result_filter.py
    test_search_result_hydrator.py
    test_search_impl_routes.py
    test_search_impl_helpers.py
    test_health_routes.py
    test_misc_routes.py
    test_metadata_route_more.py
    test_scan_helpers.py
    test_scan_routes.py
    test_scan_routes_more.py
    test_db_maintenance_routes.py
    test_db_maintenance_more.py
    test_assets_impl_routes.py
    test_custom_roots_routes.py
    test_custom_roots_module.py
    test_extractors.py
    test_extractors_helpers.py
    test_geninfo_flux.py
    test_rating_tags_import.py
    test_path_utils.py
    test_request_json.py
    test_paths_services.py
    test_registry_more.py
    test_deps.py
    test_settings_backend.py
    test_exiftool_adapter.py
    test_metadata_service_impl.py
    test_metadata_small_modules.py
    test_metadata_retry_and_parsing_utils.py
    test_geninfo_parser_impl_helpers.py
    test_geninfo_parser_impl_more.py
    test_sqlite_facade_helpers.py
    test_sqlite_facade_integration.py
    test_sqlite_facade_more.py
    test_index_entry_builder.py
    test_index_prepare_ops.py
    test_index_runtime_helpers.py
    test_index_scan_orchestrator.py
    test_index_file_ops.py
    test_index_service.py
    test_index_searcher.py
    test_index_watcher.py
    test_index_batching_persistence_streaming.py
    test_index_fs_walker.py
    test_index_fs_walker_more.py
    test_index_scan_batch_utils.py
    test_index_scan_batch_utils_more.py
    test_index_metadata_helpers.py
    test_metadata_extractor_registry.py
    test_filesystem_helpers.py
    test_filesystem_background_more.py
    test_collections_duplicates_routes.py
    test_batch_zip_routes.py
    test_browser_back_navigation_guard.py
    test_db_reset_async_safety.py
    test_route_security_guards.py
    test_security_core_helpers.py
    test_assets_path_guard.py
    test_db_connection_pool_recovery.py
    test_db_refactor_helpers.py
    test_probe_router_tool_detect.py
    test_routes_compat.py
    test_tags_sync.py
    test_shared_utils.py
    test_scan_throttle.py
    test_parser_impl_extra.py
    test_index_batching_extra.py
    test_index_prepare_ops_extra.py
    test_extractors_more.py
    test_index_db_ops.py
    test_role_classifier.py
    test_model_tracer.py
    test_index_entry_builder_extra.py
    test_scan_diagnostics.py
    test_db_recovery_extra.py
    test_sampler_tracer_extra.py
    test_search_flow_integration.py
    test_scan_flow_integration.py

norecursedirs = __old_version_zip .* build dist __pycache__ node_modules tests/__pytest_tmp__ tests/__pytest_tmp_* __pytest_tmp__ __pytest_tmp_*
addopts = -ra -p no:cacheprovider --basetemp=tests/__pytest_tmp__
